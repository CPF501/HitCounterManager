<html>
<head>
 <title>Hitcounter Numeric</title>
 <!-- OBS' CLR browser plugin might use CSS extension. Disable the CSS when it flickers. -->
 <!-- Method also needs --allow-file-access-from-files to be set -->
 <script type="text/javascript" src="javascript.js"></script>
</head>
<body>
<table id="table"></table>
<script language="javascript">

function DoVisualUpdate(data)
{
	var active = false;
	var new_tbl = "";
	var sum = 0;
	var pb = 0;
	var betterworseclass;
	var majorclass = (data.high_contrast ? 'major dark' : 'major');

	var tbl = document.getElementById('table');
	new_tbl =
 '<tr>' +
  '<td class="' + majorclass + ' left">Split</td>' +
  '<td class="' + majorclass + '" width="30px">Now</td>' +
  '<td class="' + majorclass + '" width="30px">Diff</td>' +
  '<td class="' + majorclass + '" width="30px">PB</td>' +
 '</tr>';

	for ( i = 0 ; (i < data.split_first) && (i < data.list.length) ; i = i + 1 )
	{
		sum = sum + data.list[i][1];
		pb = pb + data.list[i][2];
	}

	for ( i = data.split_first ; (i < data.split_last) && (i < data.list.length) ; i = i + 1 )
	{
		sum = sum + data.list[i][1];
		pb = pb + data.list[i][2];
		betterworseclass = (!active ? (data.list[i][1] == 0 ? 'better' : 'worse') : '');
		new_tbl +=
 '<tr class="' + (data.split_active == i ? 'current' : (data.high_contrast ? (i%2==0 ? 'even' : 'odd') : '')) + '">' +
  '<td class="' + betterworseclass + ' left">' + data.list[i][0] + '</td>' +
  '<td class="' + (data.high_contrast ? '' : betterworseclass) + '">' + data.list[i][1] + '</td>' +
  '<td class="' + (data.high_contrast ? '' : betterworseclass) + '">' + IntToStringSigned(data.list[i][1] - data.list[i][2]) + '</td>' +
  '<td class="' + (data.high_contrast ? '' : betterworseclass) + '">' + data.list[i][2] + '(' + pb + ')</td>' +
 '</tr>';
		if (data.split_active == i) active = true;
	}

	for ( i = data.split_last ; i < data.list.length ; i = i + 1 )
	{
		sum = sum + data.list[i][1];
		pb = pb + data.list[i][2];
	}

	new_tbl +=
 '<tr>' +
  '<td class="' + majorclass + ' bottom ' + (sum - pb <= 0 ? 'better' : 'worse') + ' left">Total:</td>' +
  '<td class="' + majorclass + ' bottom ' + (sum - pb <= 0 ? 'better' : 'worse') + '">' + sum + '</td>' +
  '<td class="' + majorclass + ' bottom ' + (sum - pb <= 0 ? 'better' : 'worse') + '">' + IntToStringSigned(sum - pb) + '</td>' +
  '<td class="' + majorclass + ' bottom ' + (sum - pb <= 0 ? 'better' : 'worse') + '">' + pb + '</td>' +
 '</tr>';

	tbl.innerHTML = new_tbl; // update DOM in one shot
}

Start(); // Enter eternal loop

</script>
</body>
</html>
